!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker/index",[],n):"object"==typeof exports?exports.AES=n():e.AES=n()}(window,(function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n,t){e.exports=t(1)},function(e,n,t){var o=t(2),r=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,n){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},function(e,n,t){"use strict";t.r(n);var o=t(0),r=t.n(o),i="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast,a="undefined"!=typeof wx&&!!wx&&(void 0!==wx.login||void 0!==wx.miniProgram);function c(e,n){"function"==typeof requestIdleCallback?requestIdleCallback(e,{timeout:n||1e3}):setTimeout(e,0)}function u(e){return"undefined"!=typeof Promise&&e instanceof Promise}var f={},d=function(){if(!i||!a)return!1;try{var e="";try{e=navigator?navigator.userAgent||navigator.swuserAgent:""}catch(e){}if(!e)try{e=clientInformation?clientInformation.appVersion:""}catch(e){}var n=!1;try{n=!!dd}catch(e){}return n||/AliApp\(AP/.test(e)||/AliApp\(DingTalk/.test(e)||/micromessenger/.test(e)}catch(e){return!1}}()?5e3:35e3,l=[],s=[],p=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1?arguments[1]:void 0;return t=t||"",n?e(--n,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t},g={sdk_version:"1.0.34",pv_id:p()};function v(){if(l.length){var e=l.join("|");if(d=g.maxUrlLength||d,e.length<d)return l=[],void f.send(m(e));for(var n="";l.length;){var t=l[0];if(n&&(n+"|"+t).length>d)break;l.shift(),n+=n?"|"+t:t}f.send(m(n)),l.length&&v()}}function y(e,n){!1===n?c((function(){f.send(m(e))})):(l.push(e),c(v))}function m(e){var n=["msg="+e];for(var t in g)-1===t.indexOf("plugin_")&&"requiredFields"!==t&&"maxUrlLength"!==t&&g.hasOwnProperty(t)&&(g[t]||0===g[t])&&n.push(t+"="+encodeURIComponent(g[t]));return n.join("&")}function h(){return(g.requiredFields||[]).concat(["pid"]).some((function(e){return void 0===g[e]}))}f.setConfig=function(e,n){var t=function(){if(void 0!==n)g[e]=n;else for(var t in e)g[t]=e[t]};s.length?(t(),h()||(s.forEach((function(e){y.apply(null,e)})),s=[])):(function(){if(void 0!==n)return n!==g[e];for(var t in e)if(e[t]!==g[t])return!0;return!1}()&&v(),t())},f.getConfig=function(e){return e?g[e]:g},f.updatePVID=function(){f.setConfig("pv_id",p())},f.log=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){n.ts=n.ts||(new Date).getTime(),n.type=e;var o=[];for(var i in n){var a=n[i],c=Object.prototype.toString.call(a);"[object String]"!==c&&"[object Number]"!==c&&"[object Boolean]"!==c&&"[object Object]"!==c&&"[object Array]"!==c||("[object Object]"!==c&&"[object Array]"!==c||(a=r()(a)),o.push("".concat(i,"=").concat(encodeURIComponent(a))))}n=encodeURIComponent(o.join("&")),h()?s.push([n,t.combo]):y(n,t.combo)}},f.before=function(e,n){return function(){var t=arguments,o=n.apply(f,t);u(o)?o.then((function(n){e.apply(f,n||t)})):e.apply(f,o||t)}},f.after=function(e,n){return function(){var t=arguments;e.apply(f,t),n.apply(f,t)}};var b=f,w=-1!==navigator.userAgent.indexOf("WindVane"),_=[];b.setConfig(function(){var e=function(){if(window.goldlog&&goldlog.spm_ab)return goldlog.spm_ab;var e,n=document.querySelector('meta[name="spm-id"]')||document.querySelector('meta[name="data-spm"]');if(n&&(e=n.content)&&-1!==e.indexOf("."))return e.split(".");var t=document.body&&document.body.getAttribute("data-spm");return e&&t?[e,t]:[]}(),n={title:document.title,spm_a:e[0],spm_b:e[1],hash:location.hash,dpi:window.devicePixelRatio,sr:"".concat(window.screen.width,"x").concat(window.screen.height)},t=document.querySelector('meta[name="aes-config"]');if(t)try{var o=t.getAttribute("content");o&&o.split("&").forEach((function(e){var t=e.split("="),o=t[0],r=decodeURIComponent(t[1]);if(-1!==o.indexOf(".")){var i=o.split(".")[0],a=o.split(".")[1];n[i]||(n[i]={}),n[i][a]=r}else n[o]=r}))}catch(e){}for(var r in window.AES_CONFIG)n[r]=AES_CONFIG[r];return n}()),window.addEventListener("hashchange",(function(){b.setConfig("hash",location.hash)}));var x=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(x){var S=function(){b.setConfig({downlink:x.downlink,net_type:x.effectiveType}),navigator.onLine&&_.length&&(_.forEach((function(e){c((function(){b.send(e)}))})),_=[])};S(),x.addEventListener("change",S)}try{var O=function(){var e=document.querySelector("title");e&&new MutationObserver((function(){b.setConfig("title",document.title)})).observe(e,{childList:!0,characterData:!0,subtree:!0})};document.querySelector("title")?O():document.addEventListener("DOMContentLoaded",O)}catch(e){}b.log=b.before(b.log,(function(){var e;if(window.goldlog){var n=goldlog.spm_ab;n&&(b.getConfig("spm_a")!==n[0]&&((e||(e={})).spm_a=n[0]),b.getConfig("spm_b")!==n[1]&&((e||(e={})).spm_b=n[1]))}var t=function(){try{if(window.xr){var e=Array.from(xr.global.recordingContexts.keys());if(e.length>0){var n=xr.global.recordingContexts.get(e[0]);if(n.appKey&&n.recordingId&&n.isRecording)return{appKey:n.appKey,recordingId:n.recordingId}}}}catch(e){}}();if(t){var o=t.appKey+","+t.recordingId;b.getConfig("xreplay_id")!==o&&((e||(e={})).xreplay_id=o)}e&&b.setConfig(e)})),b.send=function(e){var n=window.goldlog&&"function"==typeof goldlog.record;if(navigator.onLine||w&&n){var t,o=["/aes.1.1","EXP",e,window.AES_DISABLE_POST?"GET":"POST"];if(n)(t=goldlog).record.apply(t,o);else window.goldlog_queue||(window.goldlog_queue=[]),goldlog_queue.push({action:"goldlog.record",arguments:o})}else _.length>500&&_.shift(),_.push(e)};["AES_QUEUE","AES_QUENE"].forEach((function(e){"[object Array]"===Object.prototype.toString.call(window[e])?window[e].forEach((function(e){"function"==typeof e?e(b):b[e.action].apply(b,e.arguments)})):window[e]=[],window[e].push=function(e){"function"==typeof e?e(b):b[e.action].apply(b,e.arguments)}}));n.default=b}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@ali/aes-tracker")):"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-jserror/index",["@ali/aes-tracker/index"],t):"object"==typeof exports?exports.AESPluginJSError=t(require("@ali/aes-tracker")):e.AESPluginJSError=t(e.AES)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(t,n){t.exports=e},function(e,t,n){e.exports=n(2)},function(e,t,n){var r=n(3),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";n.r(t),n.d(t,"sendError",(function(){return _}));var r=n(0),o=n.n(r),i={noop:function(){},win:"object"==typeof window&&window.document?window:void 0,T:function(e,t){var n=Object.prototype.toString.call(e).substring(8).replace("]","");return t?n===t:n},on:function(e,t,n,r,o){return e.addEventListener?(o=o||!1,e.addEventListener(t,(function i(c){r&&e.removeEventListener(t,i,o),n.call(this,c)}),o)):e.attachEvent&&e.attachEvent("on"+t,(function o(i){r&&e.detachEvent("on"+t,o),n.call(this,i)})),this},off:function(e,t,n){return n?(e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent(t,n),this):this}},c=n(1),s=n.n(c),u={};function f(e){if(void 0!==typeof e)return u[e]}function a(e){return e?e.length<1001?e:e.substr(0,997)+"...":""}function l(e){if(!e||"string"!=typeof e)return"";try{var t=e.split("\n").slice(1).map((function(e){return e.replace(/^\s+at\s+/,"")})).filter((function(e){return!!e}));if(t.join("^").length<=2e3)return t.join("^");for(var n=!1;t.join("^").length>2e3;)if(2===t.length)t.splice(1,1),n=!0;else if(1===t.length){var r=t[0];t[0]="".concat(r.substr(0,997),"...").concat(r.substr(-1e3,1e3))}else t.splice(t.length-2),n=!0;if(t.length>1&&n){var o=t.pop();return t.join("^")+"^...^"+o}return 1===t.length&&n?t[0]+"^...":t.join("^")}catch(e){return""}}function p(e){if("string"==typeof e.message){var t=e.message.match(/Uncaught (\w+):/);if(t&&t[1])return t[1]}return e.error_type?e.error_type:e.name?e.name:e.constructor.name}var d=function(e){if("object"==typeof e){var t=f("AES"),n=e.message,r=void 0===n?"":n,o=e.filename,i=e.lineno,c=e.colno,s=e.stack,u=e.error_code,d=void 0===u?"":u,g=e.error,y=(t.getConfig("plugin_jserror")||{}).ignoreList;y&&y.some((function(t){if("string"==typeof t)return t===r;if("function"==typeof t)try{return t(r,e)}catch(e){}else if(t instanceof RegExp)return t.test(r)}))||t.log("js_error",{message:r,url:a(o),lineno:i,colno:c,stack:l(g&&g.stack||s),error_type:p(e),error_code:d})}};function g(e,t,n,r,o){try{if("string"==typeof e)return void d({message:e,filename:t,lineno:n,colno:r,error:o});d(e)}catch(e){}}function y(e){if(e)try{var t="",n=0,r=0,o="",i="",c="string"==typeof e?e:e.reason,u=f("AES").getConfig("plugin_js_error_processPromiseRejectReason");if("function"==typeof u&&(!1===(c=u(c))||void 0===c||""===c||null===c))return;"string"==typeof e.message&&(t=e.message),"string"==typeof c?t=c:"object"==typeof c&&(t=c.message);try{t||(t="object"==typeof c?s()(c).substr(0,150):t)}catch(e){}if("object"==typeof c){if("number"==typeof c.column)r=c.column,n=c.line;else if(c.stack){(a=c.stack.match(/at\s+.+:(\d+):(\d+)/))&&(n=a[1],r=a[2])}if(c.sourceURL)o=c.sourceURL;else if(c.stack){var a;(a=c.stack.match(/at\s+(.+):\d+:\d+/))&&(o=a[1])}c.stack&&(i=c.stack)}d({message:t,filename:o,lineno:n,colno:r,stack:i,error_type:e.constructor.name})}catch(e){}}var v,m,j=function(e){"undefined"!=typeof PromiseRejectionEvent&&e instanceof PromiseRejectionEvent?y(e):g.apply(null,arguments)},b=g,h=y;v="AES",m=o.a,void 0!==typeof v&&(u[v]=m);var E,_=j,w=b,S=h;E=o.a.getConfig("plugin_jserror")||{},window&&!window.AESPluginJsError&&(i.on(window,"error",w),!E.disable_unhandled_rejection&&i.on(window,"unhandledrejection",S));t.default={sendError:_}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@ali/aes-tracker")):"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-api/index",["@ali/aes-tracker/index"],t):"object"==typeof exports?exports.AESPluginAPI=t(require("@ali/aes-tracker")):e.AESPluginAPI=t(e.AES)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(t,n){t.exports=e},function(e,t,n){e.exports=!n(7)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=n(10)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(16),o=n(17),i=n(19),s=Object.defineProperty;t.f=n(1)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){e.exports=n(9)},function(e,t,n){var r=n(2),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){n(11);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(12);r(r.S+r.F*!n(1),"Object",{defineProperty:n(6).f})},function(e,t,n){var r=n(5),o=n(2),i=n(13),s=n(15),a=n(21),c=function(e,t,n){var u,f,p,d=e&c.F,l=e&c.G,y=e&c.S,g=e&c.P,h=e&c.B,v=e&c.W,m=l?o:o[t]||(o[t]={}),w=m.prototype,b=l?r:y?r[t]:(r[t]||{}).prototype;for(u in l&&(n=t),n)(f=!d&&b&&void 0!==b[u])&&a(m,u)||(p=f?b[u]:n[u],m[u]=l&&"function"!=typeof b[u]?n[u]:h&&f?i(p,r):v&&b[u]==p?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):g&&"function"==typeof p?i(Function.call,p):p,g&&((m.virtual||(m.virtual={}))[u]=p,e&c.R&&w&&!w[u]&&s(w,u,p)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(14);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(6),o=n(20);e.exports=n(1)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(3);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(1)&&!n(7)((function(){return 7!=Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(3),o=n(5).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(3);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"sendApi",(function(){return s}));var r=n(0),o=n.n(r);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if("string"==typeof e)return e.length>t&&(e=e.substr(0,t-3)+"..."),e}var s=function(e){var t=e.url,n=e.success,r=e.msg,s=e.status,a=e.code,c=e.duration,u=e.traceId,f=e.params,p=e.body,d=e.response,l=e.headers,y=e.rtype,g=e.method,h=o.a.getConfig("plugin_api")||{},v=h.ignoreList,m=h.sendResponseOnSuccess;if(!v||!v.some((function(n){if("string"==typeof n)return n===t;if("function"==typeof n)try{return n(t,e)}catch(e){}else if(n instanceof RegExp)return n.test(t)}))){var w=function(){if(!("object"==typeof my))return!1;try{var e="";try{e=navigator?navigator.userAgent||navigator.swuserAgent:""}catch(e){}if(!e)try{e=clientInformation?clientInformation.appVersion:""}catch(e){}var t=!1;try{t=!!dd}catch(e){}return t||/AliApp\(AP/.test(e)||/AliApp\(DingTalk/.test(e)||/micromessenger/.test(e)}catch(e){return!1}}();o.a.log("api",{url:t,method:"string"==typeof g?g.toUpperCase():void 0,success:n,msg:r,status:s,code:a,duration:c,trace_id:u,params:f,body:i(p,w?2e3:1e4),response:!n||m?i(d,w?1e3:1e4):void 0,headers:l,rtype:y})}};function a(e,t){return(void 0===t||t>=200&&t<300)&&(void 0!==e.success?!0===e.success||"true"===e.success:void 0!==e.isSuccess?!0===e.isSuccess||"true"===e.isSuccess:void 0!==e.isOk?!0===e.isOk||"true"===e.isOk:void 0!==e.ok?!0===e.ok||"true"===e.ok:isNaN(e.status)?!!isNaN(e.code)||200==e.code:200==e.status)}function c(e){return e.code}function u(e){var t=e.msg||e.message||e.errMsg||e.errorMessage||e.errorMsg;return t&&t.length>50&&(t=t.substring(1,50)),t}function f(e,t){if(t=t.toUpperCase(),e&&("POST"===t||"PUT"===t)){if("string"==typeof e)return e;if(window.FormData&&e instanceof FormData){var n=[];return e.forEach((function(e,t){n.push("".concat(t,"=").concat("string"==typeof e?e:Object.prototype.toString.call(e)))})),n.join("&")}return window.URLSearchParams&&e instanceof URLSearchParams?e.toString():window.Request&&e instanceof Request?e.clone().text():Object.prototype.toString.call(e)}}function p(e,t,n){var r,i=e;if("string"==typeof i)try{i=JSON.parse(e)}catch(e){}r="[object Object]"===Object.prototype.toString.call(i)?{msg:u(i),code:c(i),success:a(i,t)}:{success:void 0===t||t>=200&&t<300};var s=o.a.getConfig("plugin_api")||{};if("function"==typeof s.parseResponse){var f;try{f=s.parseResponse(i,t,n)||{}}catch(e){f={}}void 0!==f.msg&&(r.msg=f.msg),void 0!==f.code&&(r.code=f.code),void 0!==f.success&&(r.success=f.success)}return r}function d(e){return!e||-1!==e.indexOf("api=")&&-1!==e.indexOf("v=")&&-1!==e.indexOf("jsv=")||-1!==e.indexOf(".mmstat.com=")||e.match(/\.(js|css|png|jpg|gif|jpeg|webp|ico|svg)(\?.*)?$/)}function l(e){return"undefined"!=typeof Promise&&e instanceof Promise}function y(e){if(window.Headers&&e instanceof Headers){var t={};return e.forEach((function(e,n){t[n]=e})),t}}function g(e,t){if(t.originResponse)return e;if("jsonp"===t.method)return e.text();var n=e.headers&&e.headers.get?e.headers.get("content-type"):null;return n&&-1===n.toLowerCase().indexOf("json")&&-1===n.toLowerCase().indexOf("text")?"[".concat(n,"]"):e.text()}var h=function(){if(!("function"!=typeof window.fetch||window.fetch&&window.fetch.polyfill)){var e=window.fetch;window.fetch=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.a.getConfig("plugin_api")||{};if("HEAD"===n.method||"no-cors"===n.mode)return e.apply(window,arguments);var i="object"==typeof t?t.url||t.href:t;if(d(i))return e.apply(window,arguments);var a,c,u=i.split("?"),h=u[0],v=u[1],m=n.method||t.method||"GET";try{c=y(n.headers||t.headers)}catch(e){}try{l(a=f(n.body||t,m))&&a.then((function(e){a=e}))}catch(e){}var w=(new Date).getTime();return e.apply(window,arguments).then((function(e){try{if("[object Response]"!==Object.prototype.toString.call(e))return e;var t,o=(new Date).getTime()-w,i=e.clone?e.clone():e,u=i.status;i.headers.has("eagleeye-traceid")?t=i.headers.get("eagleeye-traceid"):i.headers.has("x-eagleeye-id")&&(t=i.headers.get("x-eagleeye-id"));var f=function(e){!1!==(i=p(e,u,{type:"fetch",params:v,url:h})).success&&r.disable_send_on_success||s({url:h,method:m,success:i.success,msg:i.msg,status:u,code:i.code,duration:o,traceId:t,params:v,headers:c,body:a,response:e,rtype:"fetch"})},d=g(i,n);l(d)?d.then(f):f(d)}catch(e){}return e}),(function(e){var t=(new Date).getTime()-w;throw s({url:h,method:m,success:!1,msg:e.message,status:-1,duration:t,params:v,body:a,headers:c,rtype:"fetch"}),e}))}}};var v=function(){if("function"==typeof window.XMLHttpRequest&&window.addEventListener){var e=window.XMLHttpRequest,t=e.prototype,n=t.open,r=t.send,i=t.setRequestHeader;e.prototype.open=function(e,t){n.apply(this,arguments),this._aesHook={method:e,url:t}},e.prototype.setRequestHeader=function(e,t){i.apply(this,arguments),this._aesHook.headers||(this._aesHook.headers={}),this._aesHook.headers[e]=t},e.prototype.send=function(e){r.apply(this,arguments);try{var t=this._aesHook,n=t.url,i=t.method,a=void 0===i?"GET":i,c=t.headers;delete this._aesHook;var u=n?n.href||n:"";if(d(u))return;var l,y=u.split("?"),g=this,h=0,v=y[1],m=(new Date).getTime();n=y[0];try{l=f(e,a)}catch(e){}var w=function(){h=g.status||h;var e,t=(new Date).getTime()-m;try{var r=g.getAllResponseHeaders();-1!==r.indexOf("eagleeye-traceid")?e=g.getResponseHeader("eagleeye-traceid"):-1!==r.indexOf("x-eagleeye-id")&&(e=g.getResponseHeader("x-eagleeye-id"))}catch(e){}var i,u=g.responseType||"text",f=p(i="text"===u||"json"===u?g.response:Object.prototype.toString.call(g.response),h,{type:"xhr",params:v,url:n}),d=o.a.getConfig("plugin_api")||{};f.success&&d.disable_send_on_success||s({url:n,method:a,success:f.success,msg:f.msg,status:h,code:f.code,duration:t,traceId:e,params:v,headers:c,body:l,response:i,rtype:"xhr"})};void 0!==g.onloadend?(g.addEventListener("abort",(function(e){h=-2})),g.addEventListener("timeout",(function(e){h=-3})),g.addEventListener("loadend",w)):g.addEventListener("readystatechange",(function(){4===g.readyState&&w()}))}catch(e){}}}},m=n(8),w=n.n(m),b=n(4),x=n.n(b);var _={hookFetch:h,hookXHR:v,hookMtop:function(){function e(e){var t=this.options,n=this.params,r=(new Date).getTime();return e().then((function(){var e=t.retJson.ret,i=(new Date).getTime()-r;e instanceof Array&&(e=e.join(","));var a=o.a.getConfig("plugin_api")||{},c={};if("function"==typeof a.parseResponse)try{c=a.parseResponse(t.retJson,"",{type:"mtop",params:n.data,url:n.api})||{}}catch(e){console&&console.error&&console.error(e)}var u=void 0===c.success?-1===e.indexOf("SUCCESS"):!c.success;if(u||!a.disable_send_on_success){var f,p,d,l=t.retJson.code||200,y=t.retJson.responseHeaders;if("string"==typeof y){var g=y.match(/(x-eagleeye-id|eagleeye-traceid):\s*([a-z0-9]+)/);g&&(f=g[2]);var h=y.match(/status:\s*(\d+)/);h&&(l=h[1])}if(e){var v=e.split("::");p=v[0],d=v[1]}s({url:n.api,success:!u,method:n.type||"GET",msg:c.msg||d,status:l,code:c.code||p,duration:i,traceId:f,params:n.data,response:w()(t.retJson),rtype:"mtop"})}}))}var t;window.lib||(window.lib={}),lib.mtop?lib.mtop.middlewares&&lib.mtop.middlewares.push(e):x()(lib,"mtop",{configurable:!0,set:function(n){var r;(t=n).middlewares?-1===t.middlewares.indexOf(e)&&t.middlewares.push(e):x()(t,"middlewares",{configurable:!0,set:function(t){-1===(r=t).indexOf(e)&&r.push(e)},get:function(){return r}})},get:function(){return t}})}};!function(){if(!window.__AES_PLUGIN_API__){window.__AES_PLUGIN_API__=!0;var e=o.a.getConfig("plugin_api")||{},t=e.disableHook,n=e.disableHookFetch,r=e.disableHookXHR,i=e.disableHookMtop;if(!0!==t){var s=_.hookXHR,a=_.hookMtop;!0!==n&&(0,_.hookFetch)(),!0!==r&&s(),!0!==i&&a()}}}();t.default={sendApi:s}}]).default}));!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("@ali/aes-tracker")):"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-perf/index",["@ali/aes-tracker/index"],n):"object"==typeof exports?exports.AESPluginPerf=n(require("@ali/aes-tracker")):e.AESPluginPerf=n(e.AES)}(window,(function(e){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=41)}([function(n,t){n.exports=e},function(e,n){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},function(e,n,t){e.exports=!t(5)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,n){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,t){e.exports=t(13)},function(e,n,t){e.exports=t(40)},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n,t){var r=t(10),o=t(11);e.exports=function(e){return r(o(e))}},function(e,n,t){var r=t(28);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,n){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,n){var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},function(e,n,t){t(14),e.exports=t(1).Object.assign},function(e,n,t){var r=t(15);r(r.S+r.F,"Object",{assign:t(25)})},function(e,n,t){var r=t(3),o=t(1),i=t(16),u=t(18),a=t(8),c=function(e,n,t){var f,s,p,l=e&c.F,m=e&c.G,d=e&c.S,v=e&c.P,g=e&c.B,y=e&c.W,h=m?o:o[n]||(o[n]={}),b=h.prototype,w=m?r:d?r[n]:(r[n]||{}).prototype;for(f in m&&(t=n),t)(s=!l&&w&&void 0!==w[f])&&a(h,f)||(p=s?w[f]:t[f],h[f]=m&&"function"!=typeof w[f]?t[f]:g&&s?i(p,r):y&&w[f]==p?function(e){var n=function(n,t,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,t)}return new e(n,t,r)}return e.apply(this,arguments)};return n.prototype=e.prototype,n}(p):v&&"function"==typeof p?i(Function.call,p):p,v&&((h.virtual||(h.virtual={}))[f]=p,e&c.R&&b&&!b[f]&&u(b,f,p)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,n,t){var r=t(17);e.exports=function(e,n,t){if(r(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,o){return e.call(n,t,r,o)}}return function(){return e.apply(n,arguments)}}},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,n,t){var r=t(19),o=t(24);e.exports=t(2)?function(e,n,t){return r.f(e,n,o(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var r=t(20),o=t(21),i=t(23),u=Object.defineProperty;n.f=t(2)?Object.defineProperty:function(e,n,t){if(r(e),n=i(n,!0),r(t),o)try{return u(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var r=t(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,n,t){e.exports=!t(2)&&!t(5)((function(){return 7!=Object.defineProperty(t(22)("div"),"a",{get:function(){return 7}}).a}))},function(e,n,t){var r=t(4),o=t(3).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,n,t){var r=t(4);e.exports=function(e,n){if(!r(e))return e;var t,o;if(n&&"function"==typeof(t=e.toString)&&!r(o=t.call(e)))return o;if("function"==typeof(t=e.valueOf)&&!r(o=t.call(e)))return o;if(!n&&"function"==typeof(t=e.toString)&&!r(o=t.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){"use strict";var r=t(2),o=t(26),i=t(37),u=t(38),a=t(39),c=t(10),f=Object.assign;e.exports=!f||t(5)((function(){var e={},n={},t=Symbol(),r="abcdefghijklmnopqrst";return e[t]=7,r.split("").forEach((function(e){n[e]=e})),7!=f({},e)[t]||Object.keys(f({},n)).join("")!=r}))?function(e,n){for(var t=a(e),f=arguments.length,s=1,p=i.f,l=u.f;f>s;)for(var m,d=c(arguments[s++]),v=p?o(d).concat(p(d)):o(d),g=v.length,y=0;g>y;)m=v[y++],r&&!l.call(d,m)||(t[m]=d[m]);return t}:f},function(e,n,t){var r=t(27),o=t(36);e.exports=Object.keys||function(e){return r(e,o)}},function(e,n,t){var r=t(8),o=t(9),i=t(29)(!1),u=t(32)("IE_PROTO");e.exports=function(e,n){var t,a=o(e),c=0,f=[];for(t in a)t!=u&&r(a,t)&&f.push(t);for(;n.length>c;)r(a,t=n[c++])&&(~i(f,t)||f.push(t));return f}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n,t){var r=t(9),o=t(30),i=t(31);e.exports=function(e){return function(n,t,u){var a,c=r(n),f=o(c.length),s=i(u,f);if(e&&t!=t){for(;f>s;)if((a=c[s++])!=a)return!0}else for(;f>s;s++)if((e||s in c)&&c[s]===t)return e||s||0;return!e&&-1}}},function(e,n,t){var r=t(12),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,n,t){var r=t(12),o=Math.max,i=Math.min;e.exports=function(e,n){return(e=r(e))<0?o(e+n,0):i(e,n)}},function(e,n,t){var r=t(33)("keys"),o=t(35);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,n,t){var r=t(1),o=t(3),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,n){return i[e]||(i[e]=void 0!==n?n:{})})("versions",[]).push({version:r.version,mode:t(34)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,n){e.exports=!0},function(e,n){var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},function(e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n){n.f={}.propertyIsEnumerable},function(e,n,t){var r=t(11);e.exports=function(e){return Object(r(e))}},function(e,n,t){var r=t(1),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,n,t){"use strict";t.r(n),t.d(n,"mark",(function(){return _})),t.d(n,"measure",(function(){return P})),t.d(n,"markWithEntry",(function(){return O})),t.d(n,"measureWithEntry",(function(){return j}));var r,o=t(0),i=t.n(o),u=t(6),a=t.n(u),c=t(7),f=t.n(c),s={},p=null,l=0,m=function(){p&&h(p),(l||p)&&i.a.log("paint",s)},d=function(e){var n=e.entryType,t=e.name,r={p1:e.startTime,p2:e.duration,p3:n,p4:t};i.a.log("usertiming",r)},v=function(e){var n,t={startTime:"p1",identifier:"p2",name:"p3",url:"p4",element:"p5",naturalHeight:"p6",naturalWidth:"p7"},r={};for(var o in t)void 0!==e[o]&&(r[t[o]]="string"==typeof(n=e[o])||"number"==typeof n?n:"object"==typeof n&&n instanceof HTMLElement?n.tagName:void 0);i.a.log("elementtiming",r)},g=function(){var e,n,t,r,o=i.a.getConfig("plugin_perf_resourceTimingSampling")||.01;if(!(Math.random()>=o)&&"function"==typeof window.fetch&&null!==(e=window)&&void 0!==e&&null!==(n=e.performance)&&void 0!==n&&n.getEntries&&null!==(t=window)&&void 0!==t&&null!==(r=t.performance)&&void 0!==r&&r.getEntriesByType){var u=i.a.getConfig("plugin_perf_resourceTimingThreshhold")||8e3,a=performance.getEntriesByType("navigation")[0]||window.performance.timing;if(a)if(a.loadEventStart-a.fetchStart<u)return;var c=performance.getEntries();if(c&&0!==c.length)try{var s=i.a.getConfig("pv_id"),p=i.a.getConfig("pid"),l={__topic__:"resourcetiming",__logs__:[{pid:p,name:s,resource:encodeURIComponent(f()(c.slice(0,200)))}]};if(!p||!s)return;fetch("https://aes.cn-wulanchabu.log.aliyuncs.com/logstores/aes-resourcetiming/track",{method:"POST",body:f()(l),headers:{"Content-Type":"application/json","x-log-apiversion":"0.6.0","x-log-bodyrawsize":"1234"}})}catch(e){}}},y=function(e){p=e},h=function(e){var n,t={startTime:"p3",element:"p4",url:"p5"};for(var r in t)void 0!==e[r]&&(s[t[r]]="string"==typeof(n=e[r])||"number"==typeof n?n:"object"==typeof n&&n instanceof HTMLElement?n.tagName:void 0)},b=(new Date).getTime(),w=[],x=function(e){return w.concat([]).reverse().find((function(n){return n.name==="".concat(e)}))},T=function(){var e,n,t,r;return null!==(e=window)&&void 0!==e&&null!==(n=e.performance)&&void 0!==n&&n.now?performance.now():null!==(t=window)&&void 0!==t&&null!==(r=t.performance)&&void 0!==r&&r.timing?(new Date).getTime()-performance.timing.navigationStart:(new Date).getTime()-b},_=function(e){if(void 0===e)return console.error("Failed to execute 'mark' on 'Performance': 1 argument required, but only 0 present.");var n={name:e+"",entryType:"mark",startTime:T(),duration:0};return w.push(n),d(n),n},O=function(e){return d(a()({entryType:"mark",duration:0},e)),e},P=function(e,n,t){if(void 0===e)return console.error("Failed to execute 'measure' on 'Performance': at least 1 argument required, but only 0 present.");var r=void 0===n?null:x(n),o=void 0===t?null:x(t);if(void 0!==n&&!r)return console.error("Failed to execute 'measure' on 'Performance': The mark '".concat(n,"' does not exist."));if(void 0!==t&&!o)return console.error("Failed to execute 'measure' on 'Performance': The mark '".concat(t,"' does not exist."));o=o||{startTime:0};var i={name:e+"",entryType:"measure",startTime:(r=r||{startTime:0}).startTime,duration:(o.startTime||T())-r.startTime};return d(i),i},j=function(e){return d(a()({entryType:"measure"},e)),e},E=function(){return function(){var e,n;if(window.PerformanceNavigationTiming&&null!==(e=window)&&void 0!==e&&null!==(n=e.performance)&&void 0!==n&&n.getEntriesByType){var t=performance.getEntriesByType("navigation")[0],r={};for(var o in t)"entryType"!==o&&"initiatorType"!==o&&"name"!==o&&0!==t[o]&&("number"==typeof t[o]?r[o]=t[o].toFixed(2):"serverTiming"===o&&t[o].length?r[o]=[].concat(t[o]):"string"==typeof t[o]&&t[o]&&(r[o]=t[o]));return r}}()||function(){var e,n;if(null!==(e=window)&&void 0!==e&&null!==(n=e.performance)&&void 0!==n&&n.timing){var t={};for(var r in performance.timing)"number"==typeof performance.timing[r]&&performance.timing[r]>0&&(t[r]=Math.max(performance.timing[r]-performance.timing.navigationStart,0));return t}}()};r=function(){var e=E();e&&i.a.log("perf",e),i.a.getConfig("plugin_perf_enableResourceTiming")&&setTimeout(g,5e3)},"complete"===document.readyState?setTimeout(r):window.addEventListener("load",(function(){return setTimeout(r)}));!function(){if(window.PerformanceObserver){var e=[];i.a.getConfig("plugin_perf_enableUserTimingObserve")&&(window.PerformanceMark&&e.push("mark"),window.PerformanceMeasure&&e.push("measure")),window.PerformancePaintTiming&&e.push("paint"),window.PerformanceElementTiming&&e.push("element"),window.LargestContentfulPaint&&(e.push("largest-contentful-paint"),document.addEventListener("visibilitychange",(function e(){document.hidden&&(document.removeEventListener("visibilitychange",e,!0),m())}),!0));try{!function(){for(var n={},t=0;t<e.length;t++){var r=e[t],o=new PerformanceObserver((function(e){e.getEntries().forEach((function(e){switch(e.entryType){case"paint":r=(t=e).name,o=t.startTime,(i={"first-paint":"p1","first-contentful-paint":"p2"})[r]&&(s[i[r]]=o,l++,window.LargestContentfulPaint||2!==l||m());break;case"mark":case"measure":d(e);break;case"element":n[e.identifier]||(n[e.identifier]=1,v(e));break;case"largest-contentful-paint":y(e)}var t,r,o,i}))}));try{o.observe({type:r,buffered:!0})}catch(n){o.observe({entryTypes:e});break}}}()}catch(e){}}}();n.default={mark:_,measure:P,markWithEntry:O,measureWithEntry:j}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@ali/aes-tracker")):"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-pv/index",["@ali/aes-tracker/index"],t):"object"==typeof exports?exports.AESPluginPV=t(require("@ali/aes-tracker")):e.AESPluginPV=t(e.AES)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";n.r(t),n.d(t,"sendPV",(function(){return y})),n.d(t,"switchPage",(function(){return b})),n.d(t,"clearAutoPV",(function(){return P})),n.d(t,"clearAutoLeave",(function(){return g})),n.d(t,"clearAutoSend",(function(){return P}));var r=n(0),o=n.n(r),u=o.a.getConfig("plugin_pv")||{},i=u.autoPV,a=void 0===i||i,c=u.autoLeave,f=function(){var e=window.document&&document.referrer&&document.referrer.split("?")[0]||"";return{p1:window.parent!==window,p2:e}},d=function(){try{o.a.log("pv",f())}catch(e){}},l=function(){try{o.a.log("leave",f())}catch(e){}},p=null;(void 0===c||c)&&window.addEventListener&&(p=function(){l()},window.addEventListener("beforeunload",p,{capture:!0,passive:!0}));var s,v=!0;function y(){v?v=!1:o.a.updatePVID&&o.a.updatePVID(),d()}function b(e){try{e&&o.a.setConfig(e),y()}catch(e){}}function P(){s&&(clearTimeout(s),s=null)}function g(){p&&(window.removeEventListener("beforeunload",p),p=null)}a&&(s=setTimeout((function(){d()}),10)),t.default={sendPV:y,switchPage:b,clearAutoPV:P,clearAutoSend:P,sendLeave:l,clearAutoLeave:g}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@ali/aes-tracker")):"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-event/index",["@ali/aes-tracker/index"],t):"object"==typeof exports?exports.AESPluginEvent=t(require("@ali/aes-tracker")):e.AESPluginEvent=t(e.AES)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";n.r(t);var r=n(0),o=["ec","ea","el","et"];var l,u=function(e,t){var n=function(e){var n=e.ec,r=e.ea,o=e.el,l=e.et,u=void 0===l?"CLK":l,i=e.xpath;delete e.ec,delete e.ea,delete e.el,delete e.et,delete e.xpath,e.p1=n,e.p2=r,e.p3=o,e.p4=u,e.p5=i;try{t.log("event",e)}catch(e){}};return function(){var t=arguments,r={};if(0!==t.length){for(var l=0;l<t.length;l++){var u,i,a=t[l];if(0!==l&&"object"==typeof a&&l!==t.length-1)return void(null==e||null===(u=e.console)||void 0===u||null===(i=u.warn)||void 0===i||i.call(u,"[AES tracker-plugin-event]","Only the last argument can be object type"));if("string"==typeof a||"number"==typeof a)r[o[l]]=a;else if("object"==typeof a&&l===t.length-1)for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])}n(r)}else{var f,p;null===(f=e.console)||void 0===f||null===(p=f.warn)||void 0===p||p.call(f,"[AES tracker-plugin-event]","At lease one augument")}}},i=(l=window,u(l,n.n(r).a));t.default=i}]).default}));!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@ali/aes-tracker")):"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-autolog/index",["@ali/aes-tracker/index"],e):"object"==typeof exports?exports.AESPluginAutolog=e(require("@ali/aes-tracker")):t.AESPluginAutolog=e(t.AES)}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=59)}([function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";e.decode=e.parse=n(54),e.encode=e.stringify=n(55)},function(t,e,n){t.exports=n(47)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(5)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(9),o=n(0),a=n(27),i=n(29),u=n(11),c=function(t,e,n){var f,l,s,p=t&c.F,d=t&c.G,g=t&c.S,b=t&c.P,v=t&c.B,h=t&c.W,y=d?o:o[e]||(o[e]={}),m=y.prototype,x=d?r:g?r[e]:(r[e]||{}).prototype;for(f in d&&(n=e),n)(l=!p&&x&&void 0!==x[f])&&u(y,f)||(s=l?x[f]:n[f],y[f]=d&&"function"!=typeof x[f]?n[f]:v&&l?a(s,r):h&&x[f]==s?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(s):b&&"function"==typeof s?a(Function.call,s):s,b&&((y.virtual||(y.virtual={}))[f]=s,t&c.R&&m&&!m[f]&&i(m,f,s)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(24);function o(){return t.exports=o=r||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,o.apply(this,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(e,n){e.exports=t},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(30),o=n(31),a=n(33),i=Object.defineProperty;e.f=n(4)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),o)try{return i(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=n(52)},function(t,e,n){t.exports=n(56)},function(t,e,n){var r=n(36),o=n(44);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(16),o=n(17);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(37);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(17);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(6),o=n(0),a=n(5);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*a((function(){n(1)})),"Object",i)}},function(t,e,n){var r=n(2);t.exports=function(t,e){if(null==t)return{};var n,o,a={},i=r(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(a[n]=t[n]);return a},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(49);function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r(t,o.key,o)}}t.exports=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),r(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){t.exports=n(25)},function(t,e,n){n(26),t.exports=n(0).Object.assign},function(t,e,n){var r=n(6);r(r.S+r.F,"Object",{assign:n(35)})},function(t,e,n){var r=n(28);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(10),o=n(34);t.exports=n(4)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(3);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(4)&&!n(5)((function(){return 7!=Object.defineProperty(n(32)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(3),o=n(9).document,a=r(o)&&r(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(3);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(4),o=n(14),a=n(45),i=n(46),u=n(20),c=n(16),f=Object.assign;t.exports=!f||n(5)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=f({},t)[n]||Object.keys(f({},e)).join("")!=r}))?function(t,e){for(var n=u(t),f=arguments.length,l=1,s=a.f,p=i.f;f>l;)for(var d,g=c(arguments[l++]),b=s?o(g).concat(s(g)):o(g),v=b.length,h=0;v>h;)d=b[h++],r&&!p.call(g,d)||(n[d]=g[d]);return n}:f},function(t,e,n){var r=n(11),o=n(15),a=n(38)(!1),i=n(41)("IE_PROTO");t.exports=function(t,e){var n,u=o(t),c=0,f=[];for(n in u)n!=i&&r(u,n)&&f.push(n);for(;e.length>c;)r(u,n=e[c++])&&(~a(f,n)||f.push(n));return f}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(15),o=n(39),a=n(40);t.exports=function(t){return function(e,n,i){var u,c=r(e),f=o(c.length),l=a(i,f);if(t&&n!=n){for(;f>l;)if((u=c[l++])!=u)return!0}else for(;f>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(18),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(18),o=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):a(t,e)}},function(t,e,n){var r=n(42)("keys"),o=n(19);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(0),o=n(9),a=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(43)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!0},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){n(48),t.exports=n(0).Object.keys},function(t,e,n){var r=n(20),o=n(14);n(21)("keys",(function(){return function(t){return o(r(t))}}))},function(t,e,n){t.exports=n(50)},function(t,e,n){n(51);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(6);r(r.S+r.F*!n(4),"Object",{defineProperty:n(10).f})},function(t,e,n){n(53),t.exports=n(0).Date.now},function(t,e,n){var r=n(6);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,a){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var u=/\+/g;t=t.split(e);var c=1e3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);var f=t.length;c>0&&f>c&&(f=c);for(var l=0;l<f;++l){var s,p,d,g,b=t[l].replace(u,"%20"),v=b.indexOf(n);v>=0?(s=b.substr(0,v),p=b.substr(v+1)):(s=b,p=""),d=decodeURIComponent(s),g=decodeURIComponent(p),r(i,d)?o(i[d])?i[d].push(g):i[d]=[i[d],g]:i[d]=g}return i};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?a(i(t),(function(i){var u=encodeURIComponent(r(i))+n;return o(t[i])?a(t[i],(function(t){return u+encodeURIComponent(r(t))})).join(e):u+encodeURIComponent(r(t[i]))})).join(e):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){n(57),t.exports=n(0).Object.freeze},function(t,e,n){var r=n(3),o=n(58).onFreeze;n(21)("freeze",(function(t){return function(e){return t&&r(e)?t(o(e)):e}}))},function(t,e,n){var r=n(19)("meta"),o=n(3),a=n(11),i=n(10).f,u=0,c=Object.isExtensible||function(){return!0},f=!n(5)((function(){return c(Object.preventExtensions({}))})),l=function(t){i(t,r,{value:{i:"O"+ ++u,w:{}}})},s=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!a(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return f&&s.NEED&&c(t)&&!a(t,r)&&l(t),t}}},function(t,e,n){"use strict";n.r(e),n.d(e,"autolog",(function(){return I})),n.d(e,"setPlugin",(function(){return U}));var r=n(7),o=n.n(r),a=n(22),i=n.n(a),u=n(23),c=n.n(u),f=n(2),l=n.n(f),s=n(12),p=n.n(s),d=n(8),g=n.n(d),b=n(1),v={};function h(t){return t&&t instanceof Element?getComputedStyle(t):{}}function y(t){for(var e=function(t){return t?Number(t.replace("px","")):0},n=function(t,n){n=n||"inner";var r=h(t),o=e(r.marginLeft),a=e(r.marginTop),i=e(r.marginRight),u=e(r.marginBottom),c=e(r.borderLeftWidth),f=e(r.borderTopWidth),l=e(r.borderRightWidth),s=e(r.borderBottomWidth),p=e(r.paddingLeft),d=e(r.paddingTop),g=e(r.paddingRight),b=e(r.paddingBottom),v=e(r.width),y=e(r.height);return"inner"===n&&(v-=p+g+c+l,y-=d+b+f+s),"outer"===n&&(v+=o+i,y+=a+u),v*y},r=t,o=0;r&&r!==document.body&&r.parentNode&&o<2;){var a=h(r),i=h(r.parentNode),u=a.width,c=a.height,f=a.display,l=a.position,s=i.width,p=i.height,d=i.display,g=n(r,"outer"),b=n(r.parentNode,"inner");if("auto"!==s&&"auto"!==p||(b="inline"===d||"inline-block"===d?g:n(r.parentNode.parentNode||document.body)),0!==b){if("auto"===u||"auto"===c){if("inline"===f||"inline-block"===f){r=r.parentNode;continue}g=b}g/b<.9&&(o+=1),r=r.parentNode}else{if("absolute"===l||"fixed"===l){r=r.parentNode;break}r=r.parentNode}}return r}function m(t){for(var e=null;t&&t.parentNode&&t.parentNode!==document.body;){if("a"===t.parentNode.tagName.toLocaleLowerCase()){e=t.parentNode;break}t=t.parentNode}return e}function x(t){if(t){var e=t.cloneNode(!0),n=(e||{}).children;if(n&&n.length>0)for(var r=0;r<n.length;r++){var o=n[r];/\b(badge)\b/i.test(O(o))&&e.removeChild(o)}return(e.innerText||e.title||e.defaultValue||"").replace(/(^[\s　*]+)|([\s　：:~-]+$)|([(（]\d+[)）])/gm,"")}return""}function O(t){return t?"string"==typeof t.className?t.className:t.getAttribute("class")||"":""}function _(t,e,n){if(void 0===e&&(e=void 0),void 0===n&&(n=void 0),!t)return{};if(e&&"function"==typeof e){var r=e(n);if(r)return{feature:r.feature,text:r.text||"",placeholder:r.placeholder||"",target:r.target||t}}var o=["button","checkbox","link","menuitem","radio","tab","combobox","search"],a="",i="",u="",c=t,f=(h(t)||{cursor:"default"}).cursor;"pointer"===f&&(a="clickable");var l=y(t);do{t.getAttribute("data-spm-click")&&(a="custom");var s=t.getAttribute("data-xux-log")||t.getAttribute("data-autolog");if(s){var p=Object(b.parse)(s);if(a=p.feature||"custom",i=p.text||"",p.ignore)return{feature:"",placeholder:u,text:i,target:t};if(i)return{feature:a,placeholder:u,text:i,target:t}}var d=t.getAttribute("role");d&&~o.indexOf(d)&&(a=d);var g=(t.tagName||"").toLocaleLowerCase();switch(g){case"input":"text"===(a=t.type)?u=t.placeholder||"":"button"===a||"submit"===a?(i=i||t.value,a="button"):"password"===a&&(u=t.placeholder||"");break;case"button":i=i||x(t),a=g;break;case"select":case"textarea":u=t.placeholder||"",a=g;break;case"a":case"area":i=i||x(t)||t.alt||t.href,a="link";break;case"label":var v=t.getElementsByTagName("input");if(v[0]){var _=v[0].type;"checkbox"!==_&&"radio"!==_||(a=_,i||i||x(t))}break;case"svg":case"icon":"pointer"===f&&(a="icon-button",i=x(t)||"ICON_BUTTON");break;case"img":i=i||x(t)||t.alt;var w=m(t);w?(i=i||x(w)||w.href,a="link"):"pointer"===f&&(i=i||"ICON_BUTTON",a="icon-button")}if("li"===g&&/\b(page|pagination)\b/i.test(O(t)))return{feature:"pagination",placeholder:u,text:i,target:c};if(/\bicon\b/i.test(O(t))&&"pointer"===f)return{feature:"icon-button",placeholder:u,text:x(t)||"ICON_BUTTON",target:t};if(/\bradio\b/i.test(O(t)))return{feature:"radio",placeholder:u,text:x(t),target:t};if(/\b(datetime|date)\b/i.test(O(t)))return{feature:"date",placeholder:u,text:x(t),target:t};if(/\b(prev|next|btn|button)\b/i.test(O(t))&&/^(?!next).*/.test(O(t))){i=x(t);var N=h(t),E=h(t);if(i)return{feature:"button",placeholder:u,text:i,target:t};if(N&&N.content?i=N.content:E&&E.content&&(i=E.content),!i){var j=t.getElementsByTagName("svg"),T=t.getElementsByTagName("img"),k=t.getElementsByTagName("icon");(j.length||T.length||k.length)&&(i="ICON_BUTTON")}return{feature:"icon-button",placeholder:u,text:i,target:t}}if(!a||"clickable"===a){var A=t.getElementsByTagName("select");if(1===A.length){var S=h(A[0]);"absolute"!=S.position&&"none"!==S.display||(a="select",t=A[0])}}if(a&&"clickable"!==a&&"text"!==a)return{feature:a,placeholder:u,text:i,target:t};t.parentNode&&t.parentNode!==t&&(t=t.parentNode)}while(t&&t!==document.body&&t!==l&&t.getAttribute);return{feature:a,placeholder:u,text:i,target:c}}function w(t){var e=t.feature,n=t.placeholder,r=t.text,o=t.target,a=y(o);switch(e){case"custom":case"button":case"menuitem":case"tab":r=x(o);break;case"clickable":case"link":do{if(r=x(o))break;o.parentNode&&o.parentNode!==o&&(o=o.parentNode)}while(o!==document.body&&o!==a&&!r);break;default:var i=o,u=null;do{o.parentNode&&o.parentNode!==o&&(u=o,o=o.parentNode);var c=o.getElementsByTagName("label");if(c.length>1){if(u&&u.previousElementSibling)"label"===(f=u.previousElementSibling).tagName.toLocaleLowerCase()&&(r=x(f)||"");break}if(1===c.length){var f;r=x(f=c[0])||"";break}}while(o!==document.body&&o!==a&&!r);r=r||n||x(i),o=i}t.text=r,t.target=o}function N(t){if(!t)return"";for(var e=[];t.parentNode;){var n=(t.tagName||"").toLocaleLowerCase(),r=t.id;if(r&&t!==document.body&&t!==document.documentElement)return['//*[@id="'+r+'"]'].concat(e).join("/");var o=Array.prototype.slice.apply(t.parentNode.childNodes).filter((function(t){return(t.tagName||"").toLocaleLowerCase()===n}));o.length>1?e.unshift(n+"["+(o.indexOf(t)+1)+"]"):e.unshift(n),t=t.parentNode}return"/"+e.join("/")}function E(t,e){if(!t)return!1;var n={block:"rgba(195, 220, 182, 0.6)",click:"rgba(255, 255, 0, 0.4)"};v[e]&&clearTimeout(v[e]),v[e]=setTimeout((function(){var r={left:0,top:0,position:"absolute",backgroundColor:n[e]},o=document.documentElement.scrollTop,a=document.documentElement.scrollLeft,i=t.getBoundingClientRect().top,u=t.getBoundingClientRect().left,c=h(t).width,f=h(t).height,s=h(t).position;"fixed"===s?(r.top=i+"px",r.left=u+"px",r.position=s):(r.top=i+o+"px",r.left=u+a+"px"),r.width=c,r.height=f;var p=document.createElement("div");l()(r).forEach((function(t){var e;p.style[(e=t,e?e.replace(/-\D/g,(function(t){return t.charAt(1).toUpperCase()})):"")]=r[t]})),document.body.appendChild(p),setTimeout((function(){document.body.removeChild(p)}),500)}),100)}var j={on:function(t,e,n,r,o){return t.addEventListener?(o=o||!1,t.addEventListener(e,(function a(i){r&&t.removeEventListener(e,a,o),n.call(this,i)}),o)):t.attachEvent&&t.attachEvent("on"+e,(function o(a){r&&t.detachEvent("on"+e,o),n.call(this,a)})),this},shortenString:function(t,e){return t?t.substr(0,e):""},handleText:function(t){return t?(/^[+-]?[\d,]+(\.\d+)?$/.test(t)?"666":j.shortenString(t,500))||"UNKNOWN":""},isDebug:function(){var t=window.location.search;return!(!t||!t.substring(1))&&"debug"===(Object(b.parse)(t.substring(1))||{}).autolog}},T=j,k=["target","feature","text"],A=function(){function t(){}var e=t.prototype;return e.wrapEvent=function(){var t=this;return function(e){var n=e.target;if(n!==document&&n!==document.documentElement){var r=_(n,t.plugin,e);if(r.feature){r.text||w(r);var o=r.feature,a=r.text,i=r.target,u={feature:o,text:T.handleText(a),xpath:N(i),selector:"",logtype:"CLK"},c=Object(b.parse)(i.getAttribute("data-autolog")||"");c&&l()(c).forEach((function(t){"feature"!==t&&"text"!==t&&"xpath"!==t&&"selector"!==t&&"logtype"!==t&&(u[t]=c[t])})),g.a.log("autolog",u),T.isDebug()&&(E(i,"click"),console.log(u));var f=function(t){if(t)for(var e=t;e&&e!==document.body&&e.parentNode&&e.parentNode.getAttribute;){e=e.parentNode;var n=Object(b.parse)(e.getAttribute("data-autolog")||"");if(n.feature&&"block"===n.feature)return{feature:"block-click",text:n.text||"",target:e}}return null}(i);if(f){var s={feature:f.feature,text:f.text,xpath:N(f.target),selector:"",logtype:"CLK"};g.a.log("autolog",s),T.isDebug()&&(E(f.target,"block"),console.log(s))}}}}},e.run=function(){if(window.getComputedStyle){var t=this.wrapEvent();if("ontouchstart"in window){var e=null,n=0;T.on(document,"touchstart",(function(t){var r=t.changedTouches;r&&1===r.length&&(e={x:r[0].pageX,y:r[0].pageY},n=p()())})),T.on(document,"touchend",(function(r){var o=r.changedTouches;if(e&&o&&1===o.length){var a={x:o[0].pageX,y:o[0].pageY};Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2)<100&&p()()-n<1e3&&t(r)}e=null}))}else T.on(document,"mousedown",t)}},e.autolog=function(t){void 0===t&&(t={});var e=t,n=e.target,r=e.feature,a=e.text,u=i()(e,k);if(!n)return console.error('Parameter "target" is required!'),!1;var c=_(n),f=c.feature,s=c.text;if(r||f){var p=o()({feature:r||f,text:T.handleText(a||s||w(c)),xpath:N(n),selector:"",logtype:"CLK"},u),d=Object(b.parse)(n.getAttribute("data-autolog")||"");d&&l()(d).forEach((function(t){"feature"===t||"text"===t||"xpath"===t||"selector"===t||"logtype"===t||p[t]||(p[t]=d[t])})),g.a.log("autolog",p),T.isDebug()&&console.log(p)}},e.setPlugin=function(t){this.plugin=t},c()(t)}(),S=n(13),L=n.n(S),C=L()({START_LOAD_TO_AUTOLOG:"START_LOAD_TO_AUTOLOG",IN_AEM_CONTAINER:"IN_AEM_CONTAINER"}),P=L()({READY_TO_LOAD_BY_AUTOLOG:"READY_TO_LOAD_BY_AUTOLOG"}),M=function(t){var e=t.self,n=t.target,r=t.onMessage,a=function(t,e,n){var r=function(t){t.data&&"object"==typeof t.data&&1===t.data._aes_adata_msg_flag_&&setTimeout((function(){n(t.data,t)}),0)};return t.addEventListener("message",r,!1),{send:function(t,n){var r="function"==typeof e?e():e;r&&r.postMessage(o()({},t,{_aes_adata_msg_flag_:1}),n||"*")},destroy:function(){t.removeEventListener("message",r,!1)}}}(e,n,(function(t,e){console.log("IFrame 收到消息",t),r(t,e)})),i=a.send;return{send:function(t,e){console.log("从 IFrame 向 MainFrame 发送消息",t),i(t,e)},destroy:a.destroy}},R=new A;function I(t){return R.autolog(t)}function U(t){return R.setPlugin(t)}R.run(),function(){try{if(window.parent&&window!==window.parent){window._aes_autolog_adata_loader_=!0;var t=M({self:window,target:window.parent,onMessage:function(e,n){if(e.type===C.IN_AEM_CONTAINER)t&&t.send({type:P.READY_TO_LOAD_BY_AUTOLOG},n&&n.origin);else if(e.type===C.START_LOAD_TO_AUTOLOG){var r=e.payload&&e.payload.adataScriptUrl;if(r){var o=document.createElement("script");o.src=r,document.body.appendChild(o)}t&&t.destroy(),t=null}}})}}catch(t){console.error(t)}}();e.default={autolog:I,setPlugin:U}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@ali/aes-tracker")):"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-survey/index",["@ali/aes-tracker/index"],t):"object"==typeof exports?exports.AESPluginSurvey=t(require("@ali/aes-tracker")):e.AESPluginSurvey=t(e.AES)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e){e.exports=JSON.parse('{"name":"@ali/aes-tracker-plugin-survey","version":"1.1.21","unpkg":"build/index.js","main":"lib/index.js","description":"AES 满意度统计插件","scripts":{"build":"rimraf ./build ./lib && node update_versions && npm run umd && npm run lib","dev":"webpack-dev-server --content-base public --config webpack.config.base.js","umd":"cross-env NODE_ENV=production webpack --config webpack.config.base.js","lib":"webpack --config webpack.config.common.js"},"keywords":["aes","aes-tracker-plugin-survey"],"devDependencies":{"@babel/core":"^7.11.1","@babel/plugin-transform-runtime":"^7.11.5","@babel/preset-env":"^7.11.0","@modular-css/webpack":"^25.8.0","babel-loader":"^8.1.0","cross-env":"^5.2.0","html-webpack-plugin":"^4.3.0","rimraf":"^3.0.2","serve":"^11.0.0","webpack":"^4.30.0","webpack-bundle-analyzer":"^3.9.0","webpack-cli":"^3.3.0","webpack-dev-server":"^3.3.1"},"publishConfig":{"registry":"https://registry.npm.alibaba-inc.com"},"repository":{"type":"git","url":"http://gitlab.alibaba-inc.com/aes/tracker-plugin-survey.git","directory":"./"},"dependencies":{"@ali/aes-tracker":"^1.0.10","@ali/aes-tracker-plugin-survey-core":"1.0.13","@ali/xdomain-storage":"^0.2.3","@babel/runtime":"^7.11.2"}}')},function(e,t,n){var r=n(12);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)n=u[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(7),o=n(8),i=n(9),u=n(11);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||u()},e.exports.__esModule=!0,e.exports.default=e.exports},function(t,n){t.exports=e},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports={survey:{version:"1.0.13",main:"index"}}},function(e,t,n){e.exports=n(13)},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(10);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n.r(t),n.d(t,"openSurvey",(function(){return xe})),n.d(t,"closeSurvey",(function(){return Te})),n.d(t,"renderEmbed",(function(){return Pe})),n.d(t,"destoryEmbed",(function(){return Ae})),n.d(t,"getSchemaById",(function(){return je}));var r=n(2),o=n.n(r),i=n(4),u=n.n(i),a=n(1),s=n.n(a);var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;Object.create;var l;!function(e){e[e.MOUNT=0]="MOUNT",e[e.READY=1]="READY",e[e.EVENT=2]="EVENT",e[e.ON_EVENT=3]="ON_EVENT",e[e.UPDATE_SESSION=4]="UPDATE_SESSION",e[e.SET_STORAGE=5]="SET_STORAGE",e[e.GET_STORAGE=6]="GET_STORAGE",e[e.SET_STORAGE_RESPONSE=7]="SET_STORAGE_RESPONSE",e[e.GET_STORAGE_RESPONSE=8]="GET_STORAGE_RESPONSE"}(l||(l={}));var f=function(){function e(e,t,n){var r=this;this.onmessage=function(){},this._self=e,this._target=t,this._ready=n||!1,this._readyCallback=[],this._messageListener=function(e){try{var t=JSON.parse(e.data);t.__xdomain_message&&(r._ready||(r._ready=!0,r._readyCallback.forEach((function(e){e()})),r._readyCallback=[]),delete t.__xdomain_message,r.onmessage(t))}catch(e){}},this._self.addEventListener("message",this._messageListener)}return e.prototype.post=function(e,t){var n=this,r=function(){var t;try{n._target.postMessage(JSON.stringify(c(c({},e),((t={}).__xdomain_message=!0,t))),"*")}catch(e){}};this._ready||t?r():this._readyCallback.push(r)},e.prototype.destroy=function(){this._self.removeEventListener("message",this._messageListener)},e}(),d=function(){try{var e=window.localStorage;if(!e)return!1;var t="__storage_test__";e.setItem(t,t);var n=t===e.getItem(t);return e.removeItem(t),n}catch(e){return!1}}();d||console.warn("XDomainStorage is not working due to absence of LocalStorage.");var p=function(){return Promise.reject("XDomainStorage is not working due to absence of LocalStorage.")};window._XDomainStorageFrames_=window._XDomainStorageFrames_||{};var m={emulateSession:!0,pageTransitionTimeout:2e3,sessionTimeout:864e5},g=""+Math.random(),v=0,y={};function h(){return""+v+++g}function b(e){return new Promise((function(t){y[e]=t}))}var w=function(){function e(e,t){var n=this;if(void 0===e&&(e="https://g.alicdn.com/platform/xdomain-storage/0.2.4/frame.html"),void 0===t&&(t={}),this._navigationListener=null,this._listeners=[],this._receivedKey={},d){this._options=c(c({},m),t);var r={options:this._options,url:location.href.replace(/#.*$/,""),navigationTime:window.performance&&performance.timing.navigationStart},o=function(e){var t=document.createElement("a");return t.href=e,t.cloneNode(!1).href}(e).replace(/(#.*)?$/,"#"+encodeURIComponent(JSON.stringify(r)));this._frameURL=o;var i=window._XDomainStorageFrames_[o];i?i.setAttribute("data-count",""+(+(i.getAttribute("data-count")||0)+1)):((i=document.createElement("iframe")).src=o,i.style.display="none",i.setAttribute("data-count","1"),i.setAttribute("data-xreplay-ignored",""),function(e){if(document.body)e();else{setTimeout((function e(){document.body||setTimeout(e,100)}),0)}}((function(){document.body.appendChild(i)}))),this._frame=i,window._XDomainStorageFrames_[o]=i;var u=new f(window,i.contentWindow);u.onmessage=this._onMessage.bind(this),this._messager=u,this._options.emulateSession&&(this._navigationListener=function(){var e;null===(e=n._messager)||void 0===e||e.post({type:l.UPDATE_SESSION,url:location.href.replace(/#.*$/,"")})},["mousedown","touchstart","beforeunload"].forEach((function(e){window.addEventListener(e,n._navigationListener,{capture:!0,passive:!0})}))),u.post({type:l.MOUNT},!0)}}return e.prototype._onMessage=function(e){e.type==l.GET_STORAGE_RESPONSE||e.type==l.SET_STORAGE_RESPONSE?y[e.id]&&(y[e.id](e),delete y[e.id]):e.type==l.ON_EVENT&&(this._receivedKey[e.key]||(this._receivedKey[e.key]=!0,this._listeners.forEach((function(t){t.type==e.event&&t.callback(e.data)}))))},e.prototype.setItem=function(e,t,n){var r=this;return d?new Promise((function(o,i){var u;try{var a=h();null===(u=r._messager)||void 0===u||u.post({type:l.SET_STORAGE,id:a,key:e,session:!!n,value:JSON.stringify(t)}),b(a).then((function(e){e.type==l.SET_STORAGE_RESPONSE&&o()}))}catch(e){i(e)}})):p()},e.prototype.getItem=function(e){var t=this;return d?new Promise((function(n,r){var o,i=h();null===(o=t._messager)||void 0===o||o.post({type:l.GET_STORAGE,id:i,key:e}),b(i).then((function(e){if(e.type==l.GET_STORAGE_RESPONSE)try{n(JSON.parse(e.value))}catch(e){r(e)}}))})):p()},e.prototype.removeItem=function(e,t){return this.setItem(e,void 0,t)},e.prototype.addEventListener=function(e,t){this._listeners.push({type:e,callback:t})},e.prototype.removeEventListener=function(e,t){this._listeners=this._listeners.filter((function(n){return n.type!==e||t&&n.callback!==t}))},e.prototype.dispatchEvent=function(e,t,n){var r,o=Math.random();n&&(this._receivedKey[o]=!0),null===(r=this._messager)||void 0===r||r.post({type:l.EVENT,event:e,data:t,key:o})},e.prototype.destroy=function(){var e,t=this;if(this._frame&&this._frameURL){var n=+(this._frame.getAttribute("data-count")||0);n>1?this._frame.setAttribute("data-count",""+(n-1)):(this._frame.parentElement.removeChild(this._frame),delete window._XDomainStorageFrames_[this._frameURL]),this._navigationListener&&["mousedown","touchstart","beforeunload"].forEach((function(e){window.removeEventListener(e,t._navigationListener,{capture:!0})}))}null===(e=this._messager)||void 0===e||e.destroy()},e}(),S=w,_=n(3),E=n.n(_),O="1",x="2",T="4",P="0",A="1",j="2",N=0,k="wallHanging",I="includes",C="equal",M="notNull";function D(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L=new S,G="plugin-unopen-survey-ids",F="plugin-survey-show-times",V="plugin-survey-showed-info",q=/Safari/i.test(navigator.userAgent)&&!/Chrome/i.test(navigator.userAgent),J=function(e){if(q)try{return Promise.resolve(JSON.parse(localStorage.getItem(e)||"[]")||[])}catch(e){return Promise.resolve([])}return Promise.race([new Promise((function(t,n){L.getItem(e).then((function(e){return t(e||[])})).catch((function(e){return t(Array.isArray(e)?e:[])}))})),new Promise((function(e){return setTimeout((function(){return e([])}),1500)}))])},$=function(e,t){q?localStorage.setItem(e,JSON.stringify(t)):L.setItem(e,t)};window.AES=E.a;var z=function(e){E.a.log("qnr",e)},X=function(e){return e.triggerWay!==j&&(e.triggerWay===P||!(e.triggerWay!==A||!e.triggerContent||(t=e.triggerContent,!new RegExp(t.replace(/([\/\?\.])/g,"\\$1").replace(/\*/g,".*")).test(location.href)&&0!=location.href.indexOf(t))));var t},K=function(){return J(V).then((function(e){return e||[]}))},W=function(e){return J(G).then((function(t){return(t||[]).filter((function(t){return!!e||!("object"!=U(t)||!Number(t.cycleDate))&&(!(Number(t.cycleDate)>-1e4)||Date.now()<Number(t.cycleDate))})).map((function(t){return"object"!=U(t)||e?t:t.id}))}))},B=function(e,t){var n=Date.now();"-1"==t?n=-99999:n+=864e5*Number(t),W(!0).then((function(t){(t=t.filter((function(t){return"object"===U(t)?t.id!=e:t!=e}))).push({id:e,cycleDate:n}),$(G,t)}))},H=function(e){var t,n,r=e.id,o=e.showTimes,i=e.isPreview,u=e.showCycle;o=Number(o)||0,J(F).then((function(e){var a=(e=e||[]).find((function(e){return e.id==r}));return a?(t=a.showTimes,n=a.originTimes):(t=-999,n=""),-999!=t&&n==o?(--t<1&&(!i&&B(r,u),t=-999,o=""),void Y({id:r,showTimes:t,originTimes:o})):o<=1?(!i&&B(r,u),void Y({id:r,showTimes:-999,originTimes:""})):void Y({id:r,showTimes:o-1,originTimes:o})}))};function Y(e){J(F).then((function(t){if(t){var n=t.find((function(t){return t.id==e.id}));n?(n.showTimes=e.showTimes,n.originTimes=e.originTimes):t.push(e)}else t=[e];$(F,D(t))}))}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=[],oe={},ie={},ue=function(e){var t=e.id,n=e.autoTrigger,r=void 0!==n&&n,o=AES.getConfig()||{},i=o.plugin_survey&&o.plugin_survey.pid||o.pid;return new Promise((function(e,n){Promise.all([new Promise((function(e,t){if(re&&re.length)e(re);else{var n=o.plugin_survey&&o.plugin_survey.urlPrefix,r=n?"".concat(n,"api/open/").concat(i,"/qnrForm?pageSize=1000"):"https://xux-web-config.oss-accelerate.aliyuncs.com/aes-config/".concat(i,"/qnrForm.json");fetch(r).then((function(e){return e.json()})).then((function(e){if(!e.success)return console.error("满意度插件数据获取失败：当前pid不存在"),[];var t=e.data,n=void 0===t?{}:t,r=e.content,o=void 0===r?{}:r;return re=n.rows||o.rows||[],oe=(e||{}).settings,re})).then((function(t){e(t)})).catch((function(t){console.log(t),e([])}))}})),new Promise((function(e,n){e(t&&!r?[]:W())})),new Promise((function(e,t){return e(K())})),new Promise((function(e,t){if("storage"in navigator&&"estimate"in navigator.storage)navigator.storage.estimate().then((function(t){t.quota<12e8&&e(!0),e(!1)})).catch((function(t){e(!1)}));else{try{localStorage.setItem("aem-plugin-survey-test","true"),localStorage.removeItem("aem-plugin-survey-test")}catch(t){e(!0)}e(!1)}}))]).then((function(n){var o=te(n,4),i=o[0],u=o[1],a=o[2],s=o[3];console.log(s);var c=null,l=0;i.some((function(e,n){if(c)return!1;if(e.status==N)return!1;if(t&&t!=e.id)return!1;if(t&&t==e.id)return(s||!r||u.find((function(t){return t==e.id})))&&r||(c=Z(Z({},e.formSchema),{},{id:e.id,hide:!1})),!0;if(s)return!1;var o=e.formSchema&&e.formSchema.triggerSetting||{},i=e.formSchema&&e.formSchema.schema||{},f=o.seconds||{};return!!X(o)&&(!u.find((function(t){return t==e.id}))&&(o.triggerMoment===O||o.triggerMoment===T||o.triggerMoment===x&&i.schemaType==k?(c=Z(Z({},e.formSchema),{},{id:e.id,hide:!1}),o.triggerMoment===T?l=1e3*Number(f)||0:o.triggerMoment===x&&i.schemaType==k&&(c.hide=!0),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e||{},o=r.frequencyList,i=!0;return(o||[]).filter((function(e){return e.ids.includes(t)})).forEach((function(e){var r=e.ids,o=e.days,u=e.showNum,a=n.filter((function(e){return r.find((function(t){return e.id==t}))})).filter((function(e){return e.cycleDate>Date.now()-864e5*o}));a.length<u||a.length==u&&a.find((function(e){return e.id==t}))||(i=!1)})),!i}(oe,e.id,a)||(c=null,!1)):(o.triggerMoment,!1)))})),setTimeout((function(){e(c)}),l)}))}))},ae=function(e){var t=e.id;if(!t)return Promise.resolve(null);var n=AES.getConfig()||{},r=n.plugin_survey&&n.plugin_survey.pid||n.pid,o="https://xux-web-config.cn-hangzhou.oss.aliyuncs.com/aes-config/".concat(r,"/qnrForm/").concat(t,"_draft.json");return fetch(o).then((function(e){return e.json()})).then((function(e){if(!e.success)return console.log("满意度插件数据获取失败"),[];var t=e.data,n=void 0===t?{}:t,r=e.content,o=void 0===r?{}:r;return n.rows||o.rows||[]})).then((function(e){var t=te(e,1)[0],n=void 0===t?null:t;return n&&n.draftSchema?Z(Z({id:n.id},n.draftSchema),{},{hide:!1}):null})).catch((function(e){return console.log(e),null}))},se=function(e){var t=!0;return e.map((function(n){if(t=!0,n.logicRules&&n.logicRules.length){var r=n.logicRules[0]||{},o=r.relyId,i=r.associateType,u=r.options,a=e.find((function(e){return e.id==o}))||{},s=a.score,c=a.name;if(t=!1,["satisfaction","nps","ces","rating"].includes(c)&&(i===I&&u.includes(s)||i===C&&s==u[0]||i===M&&s))t=!0;else if("tags"===c){var l=(s||[]).map((function(e){return e.index}));(i===I&&-1!=u.findIndex((function(e){return l.includes(e)}))||i===C&&s&&s.length&&u.length==s.length&&u.every((function(e){return l.includes(e)}))||i===M&&s&&s.length)&&(t=!0)}}return Z(Z({},n),{},{show:t})})).filter((function(e){return e.show})).map((function(e){return e.id}))},ce={setFrequency:function(e){var t=e.id,n=e.type,r=void 0===n?"nextMonth":n,o=e.nextMonthShow,i=void 0!==o&&o,u=re.find((function(e){return e.id==t}));if(u){var a=(u.formSchema||[]).triggerSetting,s=void 0===a?{}:a;"nextMonth"===r||i?B(t,"30"):"open"===r?(function(e,t){var n=t.visibleTiming,r=void 0===n?"2":n,o=t.showTimes,i=void 0===o?"1":o,u=t.showCycle,a=void 0===u?"-99":u,s=t.showSetting,c=void 0===s?"-99":s;"-99"==c?"2"==r&&H({id:e,showTimes:i,showCycle:"-1"}):"1"==c||H({id:e,showTimes:i,showCycle:a})}(t,s),function(e){K().then((function(t){(t=t.filter((function(t){return t.id!=e}))).push({id:e,cycleDate:Date.now()}),$(V,t)}))}(t)):"submit"===r&&function(e,t){var n=t.visibleTiming,r=void 0===n?"2":n,o=t.submitVisibleCycle,i=void 0===o?"-99":o;"-99"==i?"1"!=r&&"2"!=r||B(e,"-1"):"1"!=r&&"2"!=r||B(e,i)}(t,s)}},sendLog:function(e){var t=e.id,n=e.content,r=void 0===n?[]:n,o=e.config,i=void 0===o?{}:o,u=e.type,a=void 0===u?"expose":u,s=e.currentVersion,c=void 0===s?null:s;if(!a||!a.trim())return console.error("sendLog方法，type参数不能为空"),!1;ie[t]&&"expose"!==a||(ie[t]={time_stamps:Number((1e3*Math.random()+100).toFixed(0)+Date.now()).toString(16),first_answer:!0});var l={p1:"form_view",p2:"expose",p3:t,p4:ie[t].time_stamps};if(i&&(l=Object.assign(l,i)),"expose"===a)z(Z(Z({},l),{},{p10:c}));else if("close"===a)l.p2="close",z(l);else if("start_answer"===a&&ie[t]&&ie[t].first_answer)l.p2="start_answer",z(l),ie[t].first_answer=!1;else if("submit"===a){var f=se(r)||[];r.filter((function(e){return e&&"title"!==e.name&&f.includes(e.id)})).forEach((function(e,t){l.p1="tags"==e.name?"tag":"suggestion"==e.name?"feedback":e.name,"tags"==e.name?(e.score||[]).filter((function(e){return!!e})).forEach((function(t){var n=t.value;z(Z(Z({},l),{},{p2:n,p5:e.id}))})):null!=e.score&&null!=e.score&&z(Z(Z({},l),{},{p2:e.score,p5:e.id}))}))}return ie[t]&&"close"===a&&(ie[t]={time_stamps:Number((1e3*Math.random()+100).toFixed(0)+Date.now()).toString(16),first_answer:!0}),!0},setLogicRules:se},le=n(5),fe=n.n(le),de=(n(0)||{}).version,pe=document.currentScript&&document.currentScript.src.indexOf("//dev.g.alicdn.com")>0?"dev.":"",me=!1;function ge(){return me?new Promise((function(e){setTimeout((function(){e(!me)}),500)})):window.AESPluginSurveyUI?Promise.resolve(!0):(me=!0,new Promise((function(e){var t=fe.a.survey.version,n=document.createElement("script");n.async=!0,n.onload=function(){if("function"==typeof window.define&&window.define.amd){var t=window.require||window.requirejs;if("function"==typeof t)return t(["@ali/aes-tracker-plugin-survey-ui/index"],(function(t){window.AESPluginSurveyUI=t,e(!!window.AESPluginSurveyUI)})),void(me=!1)}me=!1,e(!!window.AESPluginSurveyUI)},n.src="//".concat(pe,"g.alicdn.com/aes/tracker-plugin-survey-ui/").concat(t,"/index.js"),n.setAttribute("charset","utf-8"),(document.body||document.documentElement).appendChild(n);var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href="//".concat(pe,"g.alicdn.com/aes/tracker-plugin-survey-ui/").concat(t,"/index.css"),document.head&&document.head.appendChild(r)})))}var ve=n(0),ye=["id","autoTrigger"],he=["id"],be=["id","mountContainer","config","pluginConfig","autoTrigger","formSchema"];function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=new S,Ee=function(){},Oe={onOpen:Ee,onSubmit:Ee,onRefuse:Ee,onClose:Ee,onSurveyMounted:Ee};function xe(e){e.id;var t=e.autoTrigger,n=(s()(e,ye),Se(Se({mountContainer:null,loadForce:!0,currentVersion:ve.version},Oe),e));return Promise.all([ge(),ue({id:e.id,autoTrigger:t}),Promise.resolve(n)]).then(Ne).catch((function(e){return console.error("error ==> ",e),onSurveyMounted(),!1}))}function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=s()(e,he);ge().then((function(e){e&&window.AESPluginSurveyUI&&window.AESPluginSurveyUI.destoryUI(t,n)}))}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.id,e.mountContainer),n=e.config,r=e.pluginConfig,o=e.autoTrigger,i=e.formSchema,u=void 0===i?null:i,a=s()(e,be);if(t){var c=Se(Se({mountContainer:t,loadForce:!0,config:n,pluginConfig:r,currentVersion:ve.version},Oe),a);return Promise.all([ge(),new Promise((function(t,n){t(u||ue({id:e.id,autoTrigger:o}))})),Promise.resolve(c)]).then(Ne).catch((function(e){return console.error("error ==> ",e),onSurveyMounted(),null}))}console.error("mountContainer 不能为空")}var Ae=Te;function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){e.id||n("请输入id"),ue({id:e.id,autoTrigger:!1}).then((function(e){t(JSON.parse(JSON.stringify(e||{})))}))}))}function Ne(e){var t,n=o()(e,3),r=n[0],i=n[1],u=n[2];function a(){"function"==typeof u.onSurveyMounted?u.onSurveyMounted(!1):u.onSurveyMounted&&console.error("onSurveyMounted属性类型错误，需要是函数类型")}return r&&window.AESPluginSurveyUI?i?(t=(t=i.requirecurrentVersion)||"",Number(de.replace(/([\d]+\.[\d]+)\.([\d]+).*/,"$1$2"))<Number(t.replace(/([\d]+\.[\d]+)\.([\d]+).*/,"$1$2"))&&console.log("%c 当前评分插件为".concat(de,"，部分配置需要升级才有效，请尽快升级插件到最新版本 "),"color:white;font-size:20px;background:red;"),window.AESPluginSurveyUI.loadUI({formSchema:JSON.parse(JSON.stringify(i||{})),options:u,aesConfig:AES&&AES.getConfig()||{}},ce)):void a():(console.error("插件ui层加载失败"),a(),null)}var ke=0,Ie="";function Ce(){var e=null;ue({}).then((function(t){return!!t&&(e=t,ge())})).then((function(t){if(!t)return null;if(window.AESPluginSurveyUI.hasOpen(e.id,!0))return console.log("有插件已打开."),null;var n={initOpen:!0,currentVersion:ve.version};return Ne([t,e,n])})).catch((function(e){console.log(e)})),ke||(ke=setInterval((function(){Ie?window.location.href==Ie||window.location.href!=Ie&&(Ie=window.location.href,Ce()):Ie=window.location.href}),1300))}function Me(e,t){var n=e.id,r=e.pid,i={mountContainer:null,loadForce:!0,currentVersion:ve.version};Promise.all([ge(),ae({id:n})]).then((function(e){var u=o()(e,2),a=u[0],s=u[1];return function(e,t){var n=e.id,r=e.pid,o=e.storagePid,i=document.createElement("div");i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.zIndex="300000",i.style.width="100vw",i.style.height="40px",i.style.lineHeight="40px",i.style.backgroundColor="#ffd8df",i.style.textAlign="center",i.style.fontSize="14px",i.innerText="".concat(o!=r?"目标地址不属于当前项目，预览失效":"当前处于评分插件（ID：".concat(n,"）预览状态"),"，点击 ");var u=document.createElement("a");u.href="javascript: void(0);",u.style.color="blue",u.style.fontSize="14px",u.innerText="结束预览",u.onclick=function(){t(),(document.body||document.documentElement)&&(document.body||document.documentElement).removeChild(i)},i.appendChild(u),(document.body||document.documentElement)&&(document.body||document.documentElement).appendChild(i)}({id:n,pid:t,storagePid:r},(function(){_e.removeItem("plugin-survey-preview-data"),s&&Te(s)})),Ne([a,s,i])})).catch((function(e){return console.error("error ==> ",e),!1}))}!function(){if(window.Promise){if(!window.__plugin_survey_already){window.__plugin_survey_already=!0;var e=AES.getConfig()||{},t=e.notAutoSend,n=e.plugin_survey,r=null,o=e.plugin_survey&&e.plugin_survey.pid||e.pid;Promise.race([new Promise((function(e,t){_e.getItem("plugin-survey-preview-data").then((function(t){return e(t)})).catch((function(t){return e(Array.isArray(t)?t:[])}))})),new Promise((function(e){return setTimeout((function(){return e([])}),3e3)}))]).then((function(e){var i=Date.now(),u=(e||[]).filter((function(e){return e.date>i})).find((function(e){return-1!=location.href.indexOf(e.href)}));u?Me(u,o):t||n&&n.notAutoSend||(o?Ce():AES.setConfig=AES.after(AES.setConfig,(function(){var e=AES.getConfig()||{},t=e.plugin_survey&&e.plugin_survey.pid||e.pid;r!=t&&(r=t,t&&Ce())})))}))}}else console.log("tracker-plugin：当前环境不支持promise")}();t.default={openSurvey:xe,closeSurvey:Te,renderEmbed:Pe,destoryEmbed:Te,getSchemaById:je}}]).default}));!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e,n,t=function(){return t=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},t.apply(this,arguments)};!function(e){e.START_LOAD="START_LOAD",e.START_LOAD_TO_AUTOLOG="START_LOAD_TO_AUTOLOG",e.RENDER_UPDATE="RENDER_UPDATE",e.IN_AEM_CONTAINER="IN_AEM_CONTAINER"}(e||(e={})),function(e){e.READY_TO_LOAD="READY_TO_LOAD",e.READY_TO_LOAD_BY_AUTOLOG="READY_TO_LOAD_BY_AUTOLOG",e.LOADED="LOADED",e.CONFIG_UPDATE="CONFIG_UPDATE",e.SHOW_DETAIL="SHOW_DETAIL"}(n||(n={}));var a,o,_,r,s,i;if(window.parent&&window!==window.parent)var A=(a={self:window,target:window.parent,onMessage:function(t,a){var o;if(t.type===e.IN_AEM_CONTAINER)null==A||A.send({type:n.READY_TO_LOAD},a&&a.origin);else if(t.type===e.START_LOAD&&!window._aes_autolog_adata_loader_){var _=null===(o=t.payload)||void 0===o?void 0:o.adataScriptUrl;if(_){var r=document.createElement("script");r.src=_,document.body.appendChild(r)}null==A||A.destroy(),A=null}}},o=a.self,_=a.target,r=a.onMessage,s=function(e,n,a){var o=function(e){e.data&&"object"==typeof e.data&&1===e.data._aes_adata_msg_flag_&&setTimeout((function(){a(e.data,e)}),0)};return e.addEventListener("message",o,!1),{send:function(e,a){var o="function"==typeof n?n():n;null==o||o.postMessage(t(t({},e),{_aes_adata_msg_flag_:1}),a||"*")},destroy:function(){e.removeEventListener("message",o,!1)}}}(o,_,(function(e,n){console.log("IFrame 收到消息",e),r(e,n)})),i=s.send,{send:function(e,n){console.log("从 IFrame 向 MainFrame 发送消息",e),i(e,n)},destroy:s.destroy})}();
